<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Attendance | Employee Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* RESET & BODY (Maintaining your existing style) */
*{ margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif; }
body{
    min-height:100vh;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:#fff;
}

/* LAYOUT */
.main{ display:flex; min-height:100vh; }
.sidebar{
    width:260px;
    background:rgba(0,0,0,0.8);
    backdrop-filter:blur(10px);
    padding-top:25px;
    transition: 0.3s;
}
.sidebar h2{ text-align:center; color:#00eaff; margin-bottom:30px; }
.sidebar a{
    display:block; padding:15px 25px; color:#fff;
    text-decoration:none; transition:0.3s;
}
.sidebar a:hover, .sidebar a.active{ background:#00eaff; color:#000; }

.content{ flex:1; padding:40px; }
.card{
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(15px);
    padding:30px;
    border-radius:15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

/* TABLE STYLING */
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th { background: rgba(0,0,0,0.5); padding: 15px; text-align: left; color: #00eaff; }
td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.status-present { color: #28a745; font-weight: bold; }
</style>
</head>

<body>

<div class="main">
    <div class="sidebar">
        <h2>EMPLOYEE</h2>
        <a href="Employee dashboard.html">üè† Dashboard</a>
        <a href="attendance.html" class="active">üìä Attendance</a>
        <a href="leave status.html">üìÖ Leave Status</a>
        <a href="apply leave.html">‚úç Apply Leave</a>
    </div>

    <div class="content">
        <div class="card">
            <h2>üìä Detailed Attendance Log</h2>
            <p style="opacity:0.7; margin-bottom:20px;">Your daily clock-in and clock-out history.</p>
            
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Clock In</th>
                        <th>Clock Out</th>
                        <th>Total Hours</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="attendanceBody">
                    </tbody>
            </table>
        </div>
    </div>
</div>

<script>
function loadAttendance() {
    const attendanceBody = document.getElementById("attendanceBody");
    // Get logs from localStorage (synced with Dashboard)
    const logs = JSON.parse(localStorage.getItem("attendanceLogs")) || [];
    
    attendanceBody.innerHTML = "";

    if (logs.length === 0) {
        attendanceBody.innerHTML = `<tr><td colspan="5" style="text-align:center; opacity:0.5;">No attendance records found.</td></tr>`;
        return;
    }

    logs.reverse().forEach(log => {
        // Calculate Duration if Clock-Out exists
        let duration = "--";
        if (log.in && log.out) {
            const diff = new Date(`1/1/2021 ${log.out}`) - new Date(`1/1/2021 ${log.in}`);
            const hours = Math.floor(diff / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            duration = `${hours}h ${minutes}m`;
        }

        attendanceBody.innerHTML += `
            <tr>
                <td>${log.date}</td>
                <td>${log.in || '--:--'}</td>
                <td>${log.out || '--:--'}</td>
                <td>${duration}</td>
                <td><span class="status-present">Present</span></td>
            </tr>
        `;
    });
}

document.addEventListener("DOMContentLoaded", loadAttendance);
</script>
</body>
</html>